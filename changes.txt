# $Id$

Change list and TODO list for ToME-NET(PernMangband)
TODO: the newest should appear the first!
To find the latest change quickly, search ==== :)

- Added random artifacts from DrAngband
- Mage damaging spells upgraded in destructive power
- Sleep Monsters II is gone, replaced by Tidal Wave
- Acid Bolt is gone, replaced by Mana Strike(a powerfull spell but only a bolt)
- Reduced the spell cost and failure rate of some mage spells to make them more
  usefull
- GoI is stackable but 1/2 will only reduce the damage instead of ignoring it
- Added Gloves of Magic, that reduce fighting but increase mana(from 10 to 100%)
  Now Mages will hopefully play in a more "mage-like" way
- Added the Yeek race, -5 to all stats, bad HP, but very few experience
  needed to gain a level.
- Add the Sorceror class
- Ball spells from party members dont hurt anymore
- Sorcerors can project wraithfrom, speed, shield on other players
- Got a permanent server(198.252.166.41) thanks a lot Crimson !
- Rings & lights artifacts
...

14/12/2000
- Damn I always forgot to make this up to date ... ok so lots of
  things changed ...
- Mimic class that can polymorph at will into any monster they have
  "studied"(killed :) enough
- Much more things I cant remeber .. ok I promise I'll TRY to get this
  uptodate ... mhh ...

16/12/2000
- Mimics can now use the powers of the monster they are polymorphed into
- Old clients no more works with new server(3.0.7)

...

28/03/2001
- Telepath Class, uses crystals, can fusion with otehr people
- Grond inscribed with !E wont earthquake
- Mage Staffs of Power wont increase casting speed
- Grond WILL increase casting speed by 4
- DragonRiders get a ESP radius of (lvl/2)
- DragonRiders lost resist poison
- DragonRiders resistancess comes at lvl 10 15 20 25

01/04/2001
- Telepaths can now cast their spells with their energy instead of the
  controlled guy energy
- Telepaths got 3 new Telekinesis spells
- Mind links needs 20 + d15 turns to be ended
- Telepaths got 1 new Psychoportation spell

16/04/2001
- Fixed a bug in the polymorph ring generation that could hang the game
- Mimics polymorph will cycle throught the possible forms instead of
  randomly selecting them

...

24/07/2001 (evileye)
- Fixed a bug in server (common/types.h) which has player_type.dun_depth as s16b,
  but uses pointer to s32b in load/save routines. Likewise with object_type.
  This does not manifest in some machines.
- Fixed lack of null termination in self knowledge and *identification*.
- Fixed the "psi-powers" bug with rods.
- Fixed wand bug which could reduce the pval of other items.
- tot_dam_aux_player was getting resistances the wrong way round (and redefining
  arg p_ptr).
- uncommented 744/745 of server/xtra1.c
- made king code multi-king friendly (made movement hook for each player)

25/07/2001 (evileye)
- Fixed up target_set_friendly so that it works with non party players
  and respects hostilities.
- Fixed "the (nothing) you are wearing is cursed" problem which annoys
  recently deceased players.
- Blood bond should not crash now.
- Added curse item spell for rogues (not fully implemented).
- Cleaned up various code and added protos for some funcs

25/07/2001 (darkgod)
- Fury, Dig, Spin warrior technics
- Fixed DSM being dopepd without unpolying
- Fixed morphing and not lossing eq wit eq is inscribed !
- /me works in chat

26/07/2001 (evileye)
- Fixed password prompt in client
- Bug in netserver which could result in bus fault fixed.
- Added Player menu to wizard commands (framework mainly)
- Added wizard level genocide

27/07/2001 (evileye)
- Fixed double experience bug on priests and sorcerors.

28/07/2001 (darkgod)
- Ghost cant gain experience
- Diving as a ghost dont affect recall depth

28/07/2001 (evileye)
- Cloned monsters do not drop anymore, and yield no experience
  Mimic count is no longer updated either.

30/07/2007
- Telepaths dont share hp anymore, it was:
  1) silyl given the idea of only the spirit of the telepath moving
  2) cheezy
- Telepaths only share half their mana
- Player levels now goes up to 100
- Monster can ain levels up to 500

02/08/2001
- Randarts rarer
- Randart power reduced
- Max 2 EA on randarts
- Max +7 mana on randarts
- Tidal Wave mana/level increased
- Healing in hellish mode is now only 3/4 instead of 1/2
- Player Golems! One can find pieces of golem and make a powerfull ally
- Level requirement for objects, exepct for the char that found it
- Level requirments on objects
- One can inscribe an object #of the Fool to get the object to display:
  "The Dager of the Fool"
- Races get different mana
- race restrict class
- Mana penality for armor increased
- Increased speed effect at high levels

04/08/2001
- New houses ready for testing prior to potential server reset
- Extended dungeon. After level 100(5000') it loops to pseudo level 1
  but with all monsters gaining +100 level
- No lev restriction on parties, but only opeople in the +/-7 level range will
  gain xp

05/08/2001
- Finished Archers books
- 90 day player timeout added.

05/08/2001 - PernMangband 3.2.0

10/08/2001
- Golems works
- Fixed Fury warrior technic

11/08/2001 - evileye
- New polygonal houses work ok now. Checks for moving off depth
  work. Player disconnect is handled ok.
  Optimisation for houses which are rectangular is needed before
  inclusion into the game properly.
  Scroll limits need to be discussed and set accordingly.

11/08/2001 - evileye
- Rectangular optimisation of houses complete.
- House creation is now compatible with the dynamic houses array.

13/08/2001 - evileye
- Added courtyards - houses with no floor (inscribe FIRST scroll @F)
- Houses were not killed on player suicide. Fixed
- Made start on a delete_house function (For DM)
- Houses may now be created within larger houses.

25/08/2001
- Rings of Flames, Acid and Ice now reduce the corresponding element damage
  by (AC * 5)%

28/08/2001
- Slowing effect of monks doubled in effectiveness

30/08/2001
- Updated commands.txt thanks to jir

10/09/2001
- When someone dies stuff only gets dropped if he/she was >= lvl5.
  Thats to prevent cheezing

27/09/2001
- Server bugfix, object description string was too small [80] for including
  the fake artifact inscriptions. I made every instance [160]. This will
  never be necessary, certainly not in all cases, but efficiency may be
  worked upon later.

28/09/2001
- Client bug fixed (peruse file overlay) Usually caused by lag.
  Common symptom, the player list appears on game screen.


28/09/2001 - Client changes (Zz)
- Now you can specify an argument in Windows and client will connect 
  directly bypassing meta server (previously this only worked for Unix clients)
- Multiple colors for different types of messages in recall window 
  (death, kill, private messages, etc.)
- CTRL-O works like CTRL-P except only shows important messages - good 
  for review after a long fight or long AFK

29/09/2001
- Target friendly bug fixed - player in own party was used ;)
- Colour messaging added - should work with all message types.

01/10/2001
- Golem following/guard bug fixed. Golem will now follow down/up
  stairs regardless of guard.
- Other bugs identified (unfixed) Target friendly with golem causes
  chaos. The golem attacks nearest player, kills then homes in on the ghost.
  Also, swapping places with the golem causes problems. (Urgent fix)

02/10/2001
- Object ownership made invalid now after player ghost death. It was
  recycling ownership. It is set to MAX_ID+1.
- Annoying level 1 suicides are no longer shown.

03/10/2001
- A couple of bug fixes, and some debug stuff removed (mine)
- Fixed golem change places with owner.
- Life scroll now shows life returning (lite_spot)

04/10/2001
- Console password request fixed (in line with client)
- Male/female differentiation in public chat.

05/10/2001
- Server admin messages fixed (in yellow, after I broke them)
- Removed the male/female colours. Admin still yellow

08/10/2001
- Minor bug fixed in house creation

23/10/2001
- Confusion brand PvP bug fixed ;)
- Wraith in own houses added. Tested, no bugs seen.

24/10/2001
- Fixed MAJOR house security bug.
- Fixed bug in savefile delete - party, houses were not reset.

25/10/2001
- The previous bugfix (timeout player) now works.

27/10/2001
- Fixed the archer spells bugs

28/10/2001
- Added multi player simultaneous building. Seems to work.
  MAX_BUILDERS allows a limit to be set on builders.

18/11/2001 (Jir)
[Applied all the past patches.. http://www.ctt.ne.jp/~sap/mang/patches.html]
- Inscription '!=' forces to pick it up. (nice for arrows etc)
- YOU LOSE YOUR ARTIFACT IF YOU DROP IT! (randarts are ok)
  [This prevents arts-exhaustion which occurs everywhere - fixed version]
- You can no longer use/sell equipments of other new characters.
- Smarter stacking codes for level-reqs
- You can see other players' equipment with "'" (need a patched client)
  [original code written by Yakina.. thx!]
- Some detection spells gives off message "You sense the absence of..".
- You can set 'Maximization' in mangband.cfg.
- 'Potion of Invisibility' is added.
- If an item's owner disappears, tag will look like {-,5} and not {5}.
- Cursed magic arrows won't return nor get (+0,+0) when are shot.
- Coloured message headers of chat if king(v)/hellish(D)/ghost(r).
- You can specify the colour of chat header([Jir]) by '}' tag.
- Spellbooks will be automatically inscribed in the proper way.
- Antimagic of DS(-n,-n) are limited somewhat save unbelievers.
- You can walk through your house door w/o opening it.
- Wizard will be born with all the appropriate books.
- 'Mushroom of Unmagic' is added (tho useless nowadays..)
- You become 'furious' when you notice someone stealing from you.
- You won't become 'hostile' when higher-xp player steals from you.
- Respawning chance of townie is halved.
- Console command 'get unique list' won't crash the server any more.
- Client uses IP-address in place of hostname for metaserver.
- Everyone can see his/her score with '#' command.
- Priest gives you some gold to restart when resurrect in temple.
- A ghost cannot go so deeper(250ft margin) than his best-depth.
- More chance of success when digging.
- You can open the door with tunnel command also.
- A torch will disappear when burnt out.
- Fixes a bug where archer branding spell lasts forever.
- 25 new vaults borrowed from PernAngband(2 of them are w/o entrance).
- Slight changes in ?_info.txt files
- You can change your party's name with 'Create A Party' command.
- You'll be protected by GoI for 2 turns after recall/stairs.
- Pack overflow will take inscription {!d} into consideration.
- Overflows while polymorphing are handled in a better way now.
- Maximum radius of teleport is reduced for high-leveled magicusers.
- Chat-line user commands: /afk, /ignore
- Chat-line admin commands: /art, /cfg, /clv, /kick, /shutdown
- Name abbreviations are available in most situations.
- New command line option -m, which specify configuration file to load.
- Client will receive final score when ghost is destroyed.
- Added 'FreeBSD 4.3R' in makefile
- Fixed a bug where Morgoth summoned townies etc.
- If one kills the same unique more than once, it'll be handled as 'cloned'.
- DM can specify monsters to summon by ID number.
- Fixed: Store command when sunrise/sunset crashed. (Yakina)
- Port numbers are now changeable with configuration file. (Yakina)
- Other small bug-fixes, typos and ameliorations(deteriorations?)
[client changes]
- You can type, for example, '15k' for 15000au and '3m' for 3,000,000au.
- You can see your gold as soon as you enter a store.
- You can see other players' equipment.(*)
- You can choose to be a bat(wo)man when creating new character.(*)
- 'no-direction cancels' bug is fixed.
- New command '/', which can handle miscellaneous types of items.
- You can scroll chat-history with ctrl-o.
- "'" command is supported(see above).
- Graphics bug in win-client is fixed (by Asclep)
 
19/11/2001 (Jir)
- Some xp bonus to encourage partying (C.Blue's idea)
- Revised conditions to check equipments.
- Bugfix on /ignore command code.

20/11/2001 (Jir)
- You get stunned, confused and also drop some items when theft fails.
- I have put a bug where OOD monsters are summoned; now fixed (thx Asclep)

22/11/2001 (Jir)
- You can use {@O} inscription to control auto-retaliator.
- Neighboring monsters will try to interfere your attempt to fire.

23/11/2001 (Jir)
- Items with too long names are displayed with abbreviated names.
- New admin commands: /lua, /recall
- Multiple-melee attacks are efficiently handled now.

23/11/2001 (Asclep [Jir wrote this log])
- Recall/stair GoI message is removed.

24/11/2001
- Lua scripting

25/11/2001 (Jir)
- Uniques can resurrect after beating Morgoth.
- Kings/Queens will be alarmed of retire_timer.
- Players under lv-5 cannot throw items (anti-cheeze).

25/11/2001 (Asclep [log by Jir])
- Shallow dungeon levels won't be static (configurable).
- NO_GHOST / PRESERVE_DEATH_LEVEL options

27/11/2001 (Jir)
- Optimization in auto_retaliate (observable :)

29/11/2001 (Jir)
- Admin commands: /static-level, /unstatic-level (/sta, /unst)
- Client suppresses repeated messages.
- 12 more vaults borrowed from ZAngband (thx, the creators!)
- 3 original vaults. Also, 2 'Between Vaults' are now normal vaults.
- DM can now specify vault 128-255 by number.

30/11/2001 (Jir)
- lv-req can handle {0} stuffs from stores.
- 4 'Pattern vaults' are commented out. 5 more original vaults.
- Bug in new auto-retaliator code is fixed(thx Moltor for report).

01/12/2001 (Jir)
- lv-req is now based on both item's quality and depth.
- User commands: /dispose(dis), /tag  Admin commands: /id, /geno
- Shopkeepers beat down prices for items with high lv-req.
- Fixed bug in steal-fury ('neutral' was handled as a party).
- You can no longer know the lv-req of unknown items.

02/12/2001 (Jir)
- Fortune cookie ported from PernA (by Mihi).
- Bugfix on /dis. Added /untag.
- Newbie(lv5-) no longer drops items when stealing fails.(thx Asclep)
- 138 new cookies added.

03/12/2001 (Jir)
- hibernation/annoucement/auto-off for AFK-mode.
- 't' won't disturb players' running (but still cannot start running).

05/12/2001 (Jir)
- Coloured cookie.
- Allow URL on chat (eg. http://www.pernmangband.net/)
- Admin command /wish
- Client tries to use META_ADDRESS_2 in case.

06/12/2001 (Jir)
- Ego monsters. [version no. is 3.2.2 now]

07/12/2001 (Jir)
- Trap Detection won't reveal all the traps.
- Bugfixes for ego monsters.
- Total of 22+2 ego-monster types.

08/12/2001 (Jir)
- More megos and bugfixes.
- wizard/DM should use console password from now on.
- SPELL_INTERFERE option in *.cfg.
- Failing to cast a spell takes a turn now.
- wizard/DM can view all the players' inventory via "'".
- Repeated messages are shown in more decent way.(client)

09/12/2001 (Jir)
- Bugfixes. Megos.
- rewritten chat-line commands' code using that of Asclep(thx).

09/12/2001 (written by Asclep/modified by Jir)
- chat-line command /cast.

10/12/2001 (evileye)
- 3d base code committed.
- Multiple towns possible.
- Multiple dungeons / Add dungeon in dm level menu.

11/12/2001 (evileye)
- Anti spamming code added

11/12/2001 (Jir)
- Vertical recall supported.

12/12/2001 (Jir)
- Horizontal recall ({@RW17,22}) supported?
- 'Cannot run' / 'Delayed run' bug fixed.
- World-coodination display for '@' screen.
- Player-location is shown on 'M'(Map) screen. (wilderness map is disabled)
- Ghost never bleeds.

13/12/2001 (Jir)
- NEWBIES_CANNOT_DROP specifies the minimum level for item/au dropping.
- ANTI_ARTS_HORDE configure option added.
- all the admin-level slash-commands are available again now.

13/12/2001 (Evileye)
- Fixed bugs in teleport_player_level
- Added town generation for Dungeon Master (limited)
- Monster generation in town/near town houses suppressed.
- Made unstatic_level function (was duplicated)
- Fixed bug in unstatic_level (space/time anchor wasnt killed for all)
- Fixed bug where new towns would not have objects/monsters attached
- Added some support for ironman dungeons - not recall
- Added support for hellish dungeons.
- Dungeons may not be generated in towns (must generate with town)

14/12/2001 (Evileye)
- Forced net code to recheck IP/port when asked
- Non mapping dungeons added. Player does not remember the map.
- Fixed bug which caused towns to be cloned in wild generator.
- Baselevel for new towns is set correctly for getlevel()
- Fixed bug which prevented towers having new_level_up_* set
  if they were maxdepth 1. (Caused endless loop in scatter)

16/12/2001 (Evileye)
- Added multiple store code, so towns have their own stores.
- Server/client changed to display worldpos (messy still)
- Monster filter added to dungeon code
- Fixed compilation problem with control.c
- Houses added to 24 hour maintenance cycle
- Logging added to maintenance (keep logs???)

16/12/2001 (Jir)
- PernA traps (about 160 kinds) and trap system ported.
- Given version number v3.3.0alpha (it'll be v4.0.0 soon :)
- Version warnings for older(/newer) initialize files.

17/12/2001 (Evileye/Jir)
- Fixed a bug where vault didn't contain monsters/objects.
- Fixed a bug where creating a tower caused crash.

17/12/2001 (Jir)
- Fixed a bug where selling an item to a store caused crash.
- Detected traps will interrupt running.
- Fixed a grave bug concerning memory in traps.c.
- Temporary stats drain(mainly for traps).

18/12/2001 (Jir)
- Bugfixes on traps.
- Bugfix: Immobile monsters beneath 5000'

18/12/2001 (Evileye)
- More bugfixes on traps which were causing memory corruption
- Edge of world bug fixed
- Fixed bug in wiz_lite.
- Added signposts - all special info structs need to be stored.

19/12/2001 (Evileye)
- Got rid of dropping 0 gold pieces
- Added c_ptr->special calling design.
- Bug fixed in project_f (bounds check)

19/12/2001 (Jir)
- Magic mapping disallowed inside NOMAP dungeons.
- Traps can be generated under items.
- 3 new traps.
- a bug in trap disarming fixed.

20/12/2001 (Jir)
- '/dis' can destroy items with pseudo-id tags ({good} or below).
- 3 more traps(Voluminous cuisine/Unmagic/Vermin).
- small bugfix on msg of set_biofeedback.
- Bugfix on Morgoth summoning.

21/12/2001 (Jir)
- Still bugfixes on traps.
- Some traps have chance of disappearence.
- 3 more traps(Random/Wasting wand/Amnesia).
- "You are too afraid to attack .." msgs flood less.
- admin command: /trap [t_idx]

20/12/2001 (Evileye) pfft use GMT/UTC dates jir...
- Bugfix in ghost powers.

25/12/2001 (Jir)
# Unstable, bug-filled, far-from-fully-implemented version!!
# Bugfixes and implementations urgently needed.
  - New ego-item system, which is a mixture of PernA-ego and PernM-randarts.
    (ego-items will use random-seeds[name3] just like randarts.)
  - Item flags are now compatible with PernA [tho many of them are not in yet.]
  - k_idx is automatically calculated from tval and sval.
  - bunch of new items/artifacts/ego-items ported from PernAngband.
- 3 more traps(Silliness/Goodbye-Charlie/Present-Exchange).

26/12/2001 (Jir)
- Item activations for some of new items are implemented.
- Added a hack to make insta-killing traps appear in deeper levels.
- Thrown randarts never break.
- "Drop 1au to get Great Scimitar" bug fixed.
- Different kind of "gold" when dropping money.
- "Torch of infravision (+2500 to infravision)" bug is fixed.
- "Leather Jacket/Sickle" bug fixed.
- Exploding ammos/boomerangs/Ricochet
- Ammo inscribed {!g} never drops(=never litter the floor).
- Other bugfixes.

27/12/2001 (Jir)
** [C] stands for Client changes.
- Sector info on '@'.
- Some small scripts.
- Chatline commands: /bed, /dress, /quaff
- pval/bpval bug is fixed(but still needing ameliorations).
[C] Random attribute-picker.
- Some of ported items are implemented(cmd6.c).
- Poison branding.
- added some articles on self-knowledge.
- Nazgul powers are ported (except Black-Breath).

28/12/2001 (Jir)
# MORE Unstable, bug-filled, far-from-fully-implemented version!!
# Bugfixes and implementations URGENTLY needed. (almost not tested at all)
  - PernAngband monster system is ported.
  - replaced 550 mangband monsters with 1042 PernA monsters.
  - Generation flags are not used for now(eg. Shark in dungeon, pfft)
  - Most of new flags are not implemented yet.
- Black-Breath is implemented.
- Specific ESP (eg. slay-orc weapon gives orc-only ESP)
- Fixed a bug that allowed to generate breeders on the wilderness.
- Some mangband-origined ego-items are back again.
- Fixed a bug where some ego-items could never be generated.

29/12/2001 (Jir)
- Black-Breath works slower/is contagious now.
- Fixed a bug that caused breeders not to breed.
- Randarts/egos can have specific-esp.
- Some fun features for pints of ale :)
- DSM activation fixed.
- Added some flags on player_type.
- Fixed a bug that caused Smeagol to drop Grond/Crown (mdr.. thx Mihi!)
- monster_death ported.

30/12/2001 (Jir)
- new RBM/RBEs implemented.
- fixed a bug that allowed ego-torches to burn forever.
- some special attacking effect (like Chaos/Vorpal/Vampiric) implemented.
  (but they don't work in pvp yet!)
- Items with high bonus get *higher* prices.
- Config options (cfg_blabla) are bundled in one structure (cfg.blabla).
- New config option SPELL_STACK_LIMIT.
- Wraith-Form is harder to stack(just like Haste-Self).
- Reflection. Some traps.

31/12/2001 (Jir)
- Boomerang/Axe/MageStaff randarts.
- New monster spells are implemented(flags4-6).
- (Slightly) easy-to-read unique list.

1/1/2001 (Jir)
- A happy new year.
- Merged the changes/files necessary to compile in win32(by Yakina).
- LUA error messages are displayed only to DM/wizard.
- bandled CAUSE_1~4 into CURSE, ARROW_1~4 into ARROW_1~2.
- Insanity/Eldritch-horror(partially) implemented.
- Original monsters/mego/items/egos/artifacts.
- Drain life/mana

2/1/2001 (Yakina [note by Jir])
- some fixes on win32-client.
- bugfixes, and extern.h cleanup.
- win32-server runs *confortably* now.

2/1/2001 (Jir)
- 'cleverer' monster spells. (set STUPID_MONSTERS if it's too slow)
- monster category filter (eg. to eliminate Joke-monsters).
- better store-price calculator (rebalancement needed).
- dying hellish could cause unfindable arts.

3/1/2001 (Jir)
- new(?) traps: pit, chasm
- Shopkeepers always benefit from transaction(STORE_BENEFIT).
- Store can merge items in a reasonable way.
- LIFE/MANA item flags implemented.
- Fixed a bug that allowed multiple artifacts(like Galadriel).
- chatline command: /ex(tra), /ref(resh)
- slain a lot of warnings.
- "Kings' etiquette" is coded in. (optional)

4/1/2001 (Jir)
** [B] stands for Bugfix.
- monster-move code ameliorated (!STUPID_MONSTERS)
- some monsters will prefer to keep distance (even STUPID_MONSTER is on).
- new monsters with DISBELIEVE power (eg. Unbeliever).
- yaac(Yet Another Anti-Cheeze): lowbies' arrows won't drop on floor.
- antimagic shield of party member disturbs spellcasting less.
- use of magic-device is penalized according to the antimagic power(and not 0)
[B] antimagic of weapon was not counted.

5/1/2001 (Jir)
- unique-list is slightly improved.
- chatline command: /target  (Idea from Norcoth; thx)
- auto-retaliator can handle a monster inside walls in a better way.
- RES_TELE flag implemented.

6/1/2001 (Jir)
- some monsters can follow player's teleport.
- *.cfg option: RUNNING_SPEED (it's HACK! ;)
[B] pack of mages couldn't keep distance from a player correctly.
- *.cfg option: ANTI_SCUM and DUN_UNUSUAL
- dungeon unstaticer is optimized, along with anti-scum code.
- shallow levels of cave contain many stairs.
[B] "You bump into it." in the place where a king committed suicide.

7/1/2001 (Jir)
[B] "You bump into it." when in erratical form.
[C][B] Random class-selecting sometimes failed.
- STARTING_STAT_LIMIT compile option, which force the max to 18/40.
- MULTI_HUED_PROPER compile option, which makes some monsters shimmer nicely.
- uniques and ego monsters 'sometimes' glitter. (better if bold..)
- compact_* functions are ameliorated.
  This seems to lessen the load and memory consumption in a great way :)
- adjusted teleport_player a little more.
[H] larger tavern / shop lighting
[B] some of holy animals didn't do any damage.

12/01/2002 (Evileye)
- Added a wilderness generator (test).
- Reenabled and fixed the wild mapping function (still more fixes needed).
- Configuration options for initial town/dungeon added.
- Players' initial wilderness map includes town now.
- Players have view of suburbs now.
- Fixed a number of similar town radius omission bugs.

13/01/2002 (Evileye)
- Cleaned up new dungeon code, removing old
- Fixed targetting bug in new code
- Some compilation warnings fixed (cleanup)
- Light bug fixed when changing wilderness area
- Recalling up/down in wilderness fixed
- Teleport level had same problem as recall (when new wz became 0)
- Hacked up load2.c - backwards compatibility is only posssible
  in the future. ;)
- Players may not enter high level dungeons quite so easily.

15/01/2002 (Evileye)
- Fixed temple priest for dungeon master.
- Fixed typo in "amulet shatters".
- Base town no longer has wasteland or deep forest beside it.

17/01/2002 (Evileye)
- towndist made much faster for calculating radii.
- recalling in wilderness defaults to last town visited, in the
  absence of a dungeon.
- filtered aquatic monsters suitably (i think) now to confine them ;)
- aquatic monsters should not leave the water now.
- aquatic monsters always start in water.

18/01/2002 (Evileye)
- Ironman recalling done (maximum level of tower or dungeon)

19/01/2002 (Evileye)
- Players below level 5 never get stuck in walls
- Wilderness generated AFTER random generator is seeded ;)
- Wilderness large map saved - saves time in startup.
- Fixed bug where player changes wilderness level.
- More cleaning up done.
- Wilderness map fixed.
- project() bug fixed where spell is bounced

20/01/2002 (Evileye)
- Islands in the sea for Olorin
- removed old house code.
- fixed bug in check_antimagic()
- fixed client bug with store size
- Burning trees is drawn now.

21/01/2002 (Evileye)
- Fixed admin/dungeon master house access.
- Server broadcasts player levelling.

23/01/2002 (Evileye)
- Miscellaneous bugfixes, typos and cleanups.

29/01/2002 (Evileye)
- Fixed exploitable bug in server code. Client could crash server
  if interrupted before play started.
- Removed some of the extra stairs on comfortable levels.

31/01/2002 (Evileye)
- Mimic (server) bugfix.
- Shop bugfix.
- Mimic code moved, and fix applied to prevent bad townie forms.

09/02/2002 (Evileye)
- Unstaticer/anti scum changes.

10/02/2002
- Server/sched bug fix. Sockets closed when connection does not pass
  the Contact() stage. The select mask was being set to the new mask!
- Added automatic nice shutdown. No more angry players.
- Mimic rings have no restriction on use now.

26/02/2002 (Jir)
- leftover typos and minor bugfixes.

26/02/2002 (Yakina {note by Jir})
- Resurrected command 'I' (examine Item)
- Bugfixes and enhancements for windoze.
  - cleanup makefile.bcc
  - fix broken menu
  - new menu item 'Save Preference'.
	Fonts and Windows' positon are saved to .ini
  - Windows font (logical font) support (experimental).
    Define 'USE_LOGFONT' in makefile.bcc or appropriate place.
  - `Slow server' bug fix. (Windows server can be compiled well,
	but not work at least the HEAD)
  - some minor fix

26/02/2002 (Unknown {note by Jir})
- Borrowed a *_info.txt renumbering script.
  http://www.fragment.com/~jl8e/angband/

01/03/2002 (Jir)
- players can use /rec now (this applies item with {@R})
- new monster: exploding coins
- admin command: /en(light), /eq(uipment) ,/unc(urse)
- SEVERE_GENO/RESIST_GENO compile-time option.
- saving-throw is limited to 95 (4% fail) now.
- door spiking (ctrl-s or '/')
- /bug (/rfe), which leaves a message on server. {thx A.Dingle for idea}
- admin can view log-file and rfe-file via client.
- store buying-prices reflect *ID* states.
- STORE_TURNS is moved to cfg struct.
- mangband.cfg revised.
- doors can be trapped.
[C] option-setting screen accepts 'j','k','s','t','5' keys.
[C] server-list can display the whole players when crowded
[B] strange colouring in unique list
[B] some traps create 'phial' (INSTA_ARTS)
[B] breeders won't breed
[B] stormbringer was way too powerful (+8 attacks!!)
[B] indestructible rings didn't work
[B] a leveled spellcasters could cast with DarkSword
[B] artifact missiles could be bandled
[B] store prices were confused with pval and bpval
[B] Nazguls didn't drop the rings
[B] some arts were handled in a wrong way when fighting Nazguls

03/03/2002 (Jir)
- the rest part of porting of monster-AI is done;
  now monsters have learnt to hide behind obstacles.
  if server gets slow by this, pls adjust SAFETY_RADIUS in melee2.c.
- monsters also cast spells even when out of sight.
- *ID*ed items are marked with '*'.
- /unc(urse)
- GoI can no longer prevent genocide's strain.
[H] makeshift underground watery area added for exhibition.
[B] client crushed when having 2 same books with different inscription.
    (not really fixed; just hacked around)

05/03/2002 (Jir)
- some more traps.
- exported cfg to LUA (eg. '/ cfg.store_turns=10')
- low-sanity alart and 'flushback' hallucination
- fixed watery levels (see generate.c)
- randart light-source changed (revert it if some1 already has one)
- player ghost 'fade' slowly, so that a player won't try to preserve
  the floor for days. (also, resurrection penulty is reduced to 40% now)
- DEBUG_LEVEL is defined (config.h)
- LEVEL_UNSTATIC_CHANCE and ANTI_SCUM meaning had been changed. (mangband.cfg)
- PUBLIC_RFE: allows all the players to see rfe-file sent by /rfe.
- /purge: clear monsters/items/traps on the wilderness (save owned items)
[B] unstaticer is (I hope) sane now.
[B] lantern refilling 
[B] watery respawning crashed
[B] a trap caused buggy screen like ^^^^^^^^^^^^^^^^^^^^^^^
[B] food comsumption was too slow, you know

06/03/2002 (Evileye)
- Added guild system framework. Needs more work before it will be
  useful.

07/03/2002 (Jir)
- optimizations on monster-AI etc.
- tdy[],tdx[],tdi[] are introduced;
  they should do some speed-up for radius-related things.
- GF_DISINTEGRATION is back.
- yellow light blinds(GF_BLIND).
- INDIRECT_SUMMONING_RADIUS and STUPID_Q compile options, for the asking.
  (I spent hours to find out why hounds stopped breathing from corner ;)
- climbling up/down can fail when confused. (STAIR_FAIL_IF_CONFUSED)
- version strings(code is from Vim6.1a).
- client is very un*x/vi-user friendly now.
- forgotten monster flag RF1_FRIEND is implemented (smaller pack, that is).
[B] 'Stone to Mud' dug 2 blocks.

07/03/2002 (Evileye)
- Added more of the guild system functions - still incomplete, but
  nearly done. Save/load to be done last (must remain compat.)

08/03/2002 (Evileye)
- Guild system load/save implemented. Converts old savefiles safely.

08/03/2002 (Jir)
### branching for convenience.
- FRIEND_FIRE_CHANCE(spells1.c)
- silly dying messages. (configurable with CHATTERBOX_LEVEL)
- sanity pots can cure hallucinations too.
- insanity hallucination slowed somewhat.
- genocide penalty is halved now, compared with mass-geno.
- RESTING_RATE(dungeon.c)
- REPRO_RATE(melee.c), another check for breeding.
- Nazgul rings are toned down a bit.
- exp.drain strengthened a little.
- black-breath exp.drain slowed a little.
[C] command line options,like: mangclient -lName passwd TomeNET.net
[C] .mangrc enhanced
[C] search command improved a little.
[B] client displayed csane/msane in place of chp/mhp!
[B] ego magic arrows could be generated.
[B] serious bug in radius spells(tdi).
[B] spiking a trapped door didn't set it off.
[B] 'Really destroy 0 of your blabla?'

09/03/2002 (Jir)
- PARTY_XP_BOOST
- file-viewer ameliorated (voir self_knowledge)
- 2-Handed weapons are handled correctly now.
- base and arts flags are cumulative now (need checking)
- NO_TARGET implemented (for goldfish in the ponds :)
- monster filters. (no eagles in dungeon, etc)
[H] extra check for monster summoning (SUPPRESS_SUMMON_RATE)
[B] digging tools had bpval of 0.

09/03/2002 (Jir)
# basements for floor-flags.
# version no. 3.4.2a
  - smaller floors can be generated (SMALL_FLOOR_CHANCE).
  - some floor flags implemented.
  - Vermin Control scroll added.
# vault extension
  - generation flags
  - forcing floor flags
  - symmetric variations
- AUTO_PURGE, RESTING_RATE are now runtime options.
- POTION2 didn't have flavors
- c_special uses union.
[H] slowed multi-hue updating for efficiency.
[C] client option '-P<path>' (also 'path' in .mangrc)
[B] light spell in the wilderness could crash. (hope really gone..)
[B] "You switch place to it." when disarming a trap.

09/03/2002 (Jir)
- file viewer can handle any existing text files.
- slash-commands online manual: /help
- /less
- more efficiency codes.
[B] /rec without parameter 
[B] summoner could summon 'behind' walls.
-- fixes merged (Evileye)
[B] 'I' or 'e' messes the screen inside stores (/* evil test */ stuff)
[B] log-file viewer(&6) leaves messy screen when done.



14/03/2002 (evileye)
- IP banning filter added. (fixed at 5 mins just now.)

16/03/2002 (evileye)
- Litter removal added as part of a general object management
  system.

17/03/2002 (evileye)
- House scanner checks player and party houses for suspect items.
- Dungeon master can no longer be private messaged.
- msg_print_near does not report the dungeon master's actions.
- /kick now allows the user to specify a ban time (default 5 minutes)
- Major bug fixed in /clv fixed.
- Water is less common in some places

18/03/2002 (evileye)
- Dungeon master can now pick up items (no chown)
- Bug fix in the look command where dungeon master could be seen.
- Reflection bug should be fixed.

23/03/2002 (evileye)
- Simple monster quests added.

03-05/2002 (things that were implemented by evileye)
[B] [Bashing for beginners] contains 'Darkness Storm' etc.
- simple quests
- guild
- invitation system


01/06/2002 (Jir)
# mere merge. (Many things seem to be added by evileye in my absence :)
- admin char no longer starts with special equips (type /eq instead).
- BRANCH_COMPATIBILITY_CLUDGE introduced to load2.c.
- new slash-cmd documented in /help.
- player-info.lua updated.
- single-hued dragons are no longer 'ATTR_MULTI' (for speed's sake)
  Dragonriders are 'ATTR_MULTI' instead now.

02/06/2002 (Jir)
- traps of moat.
- landscape specifiable for destroy_area().
- /feeling, which displays the feeling of current floor.
- exp bonus for hard condition like NO_MAP, NO_TELE etc.
- /shout
- Black Breath induced by an item will be off when the item is removed.
- wielding 'Stormbringer' make the wielder attack the others.
- mon_allowed uses percent now. (see tomenet.cfg)
[B] inscription {!w@A1} worked wrong.
[B] WoR worked wrong if with {@R} and w/o depth specification.
[B] Stormbringer didn't have the random seed.

03/06/2002 (Jir)
- NO_MAGIC floor cannot be generated beneath 5000' anymore (to help Morgie :)
- Morgoth can dig through permawalls now.
- out-of-sight spellcasting won't be reported (like 'It blinks away.')
- finally, townies ceased to keep you from running.
- POTION2 items won't appear in BM. Athelas rarer in BM too.
- /quaff removed.
- optimizations.
[B] slash-command failed to handle wpos if all X/Y/Z are specified.
## 3.5.3alpha
- file-saving/loading via csfunc.c implemented.
- t_list[] is obsolete; written using csfunc[]()

04/06/2002 (Jir)
- STUPID_MONSTERS flag is devided into more detailed flags.
- use of missile is allowed even with 2H-weapon(since shield is restricted
  already). Other thoughts?
- chance of trap to vanish is ported to tr_info.txt.
- chance of a monster digging a wall depends on its level.
- damage induced by missile traps can be adjusted by MISSILE_TRAP_FACTOR.
- 3 new traps using GF_DISINTEGRATION.
[B] uniques from non-100% themes didn't always show up in kill list.

08/06/2002 (Jir)
- /monster: displays the No. of monsters killed (aide for mimics).
- MONSTER_DIG_CHANCE in melee2.c.
- pkilling penulty on non-town is paralysis(and not Wrath) now.
- Stormbringer sets pk flags now.

09/06/2002 (Jir)
- mimics in aquatic form suffer from anoxia if out of water.
- drowning is slow with high STR/DEX.
- saving throw for curse weapon/armor traps.
- aquatic-formed mimic can 'run' (let's say swim :) under the water.
[B] door trap remained on the screen when disarmed.
[B] '... teleports away' msg even when teleportation failed.
[B] Maggot and his dogs resurrected for kings/queens.

10/06/2002 (Jir)
- event msgs on monsters(like waking up) are shown to everyone within sight.
- Staff of *Perception*.
- PROJECTION_FLUSH_LIMIT prevents some uncontrollable situation where many
  monsters fire a volley at a player and the client gets stuck.
- Monks can disturb adjacent monsters' attempt to teleport. (grabbing)
[C] chat-line editor/history implemented. (askfor_aux) (^P, ^N, ^U, ^W, ^X)
[B] Amulet of Speed always was +0

11/06/2002 (Jir)
# client incompatible with previous ones
- NO_ENCHANT flag, mainly for Mage Staves.
- quiver and tool slot implemented.
- Picklock.
[B] Store '3' wouldn't buy Mage Staves.
[B] broken admin inventory.
[B] /dr couldn't handle rings well.
[C] total weight displayed for 'i' and 'e' commands.

12/06/2002 (Jir)
- 2 anti-stealing tools.
- conf/stun etc. affect stealing.
- not-invited player will receive the reason why (s)he's rejected.
- 'guest' accout: a player with the name 'guest' can log on to the server w/o
  password and w/o his/her name on the allowlist.
- SENS_FIRE implemented (to notice it's used nowhere.. cept Ent)
[P] some rule-changes in elemental damages.
[H] digging tool randarts no longer are available
[B] Ophiuchus trap didn't worked on the players.
[B] 'grabbing' worked for non-monks.

13/06/2002 (Jir)
- suppressed 'antimagic' messages when the monster is out of sight.
- no disturb when antimagic succeeded.
- /dr, /bed, /dis disturbs running etc.
- item damaging by water.
[B] ghost could be buried in permawalls when teleporting.
[B] ghost could lose all its exp due to overflow (tho not imaginable)
[B] boomerang randarts could have extra attacks.
[B] branded/slaying boomerang didn't work.
[B] screen messed after using some party commands.
[B] shadow/hunt books were fireproof.
[H] TELEPORT_MIN_LIMIT, for more useful 'teleportation'.
[H] /ex shows max_dlv.

14/06/2002 (Jir)
# version 3.5.4a, for item stacking.
  - item can stack on the floor, except within houses.
  - player can only access to the top of a pile.
- neutral players have chance to harm each other via missiles/balls(anticheeze)
- swordsmasters can disarm players' weapon.
- cleanup concerning EVIL_TEST (still needs to be defined)
- DEATH_ITEM_LOST to balance death drops
[P] potion_smash_effect() imported.
[B] clone status weren't saved.
[B] reflection couldn't harm monsters.
[B] pack_overflow() was broken.
[B] artifact 'known' status wasn't fixed when loading savedata.
[B] rebooting server always made floors disappear (Yeah, FIXED!!!);

15/06/2002 (Jir)
# all changes in jir-EXP are merged to the trunk now, along with the
# ToME skill system basements.
# (provisonal version 3.5.5a, for backward compatibility)
- Some monsters have learnt to head for treasures.
- Monsters can pick up gold.
- digging is harder if w/o proper tool.
- intelligent monsters' digging speed differs according to the wall type.
- quits if '-m' is specified but cannot actually read the file.
[B] house(dna) data was broken if bedtown was static when saving.
    (hand-made dungeon/tower still causes infinite loop prolly.)
[B] p_ptr->total_weight went wrong when adding ammo to the quiver.
[B] TOOL_EQUIPPED ignored tval.
[B] TV_POTION2 was white when in the inventory/0au when non-id-ed.

16/06/2002 (Jir)
- /news, displays news.txt
- you can no longer drop items on stairs/store-entrances.
- monster drops stack on the floor too.
- extra info in unique/arts list available for admin-chars.
- /arts [show,fix,ban!,reset!], /unique [unseen,nonkill]
- unique r_sight mending code. (maybe we'll need whole savedata checker..)
[H] you can go into a store with '>' key.
[B] TV_POTION2 didn't shatter when thrown.
[B] you couldn't fire missiles, doh!
[B] was trying to read 'mangband.rfe' while rfe file was 'tomenet.rfe'.
[B] floors got unstaticed prematually sometimes (prolly my enbug).
[B] STR damage by swimming exertion could be prevented by sustain_str.
[B] excise_object_idx crashed if unstaticed.
[B] server shutdown caused ever-unfindable arts.
[B] 2 'if();' potential bugs in new_wr_dungeons() fixed.

16/06/2002
[P]- Backporting the ToME skill system !
[P]- Detect traps can NOT fail

17/06/2002 (Jir)
# 'pfft, my sorc cannot cast!' version ;)
- monsters drop what they've picked up before.
[H] roguelike-keys support in do_cmd_skill()

18/06/2002 (Jir)
- Test code for transmitting races/classes when logging on.
  we should separate types.h into two(server-client) or add some hack to
  actually be able to change # of races/classes on the fly.
- obj_theme implemented (for monster drops).
- MONSTER_ITEM_CONSUME to keep monsters from dropping too much.
[B] wipeout_needless_objects() did nasties. commented out.

19/06/2002 (Jir)
- cloned monsters drop what they had picked up.
- object code optimized somewhat.
- death mold trap
[B] a lv1 sorc could cast 30 magic missles each turn

20/06/2002 (Jir)
- trap_creation() is radius-based now.
- player cannot gain more than 1 level at a time.
[P] detection magics are radius-based now. (affected by skill and level)
[P] Parchment.
[B] player could infinitely gain skill points by losing and gaining levels.
[B] invisibility and aggravation caused spamming.
[H] wands/staves of plenty get double from recharging.

21/06/2002 (Jir)
- item-enchanting spells can add to 'discount' (after Zz's proposal)
- Receive_spell selects the function to call by the book (and not class).
- Nexus/Gravity breath teleports items away.
- Indestructible rings/Fireproof scrolls can stack.
[B] admin char caused 'write error'.
[H] 'p' key to scroll back when perusing a file.

22/06/2002 (Jir)
- spell interference is affected by corresponding skills.
- some parchments.
- auto-inscriber reimplemented.
- changes in skill reflect to the spells list at once.
- chest dies nicely.
- Hunting and Technic skills.
[B] some spells are shown as 'unknown' even when castable
[B] Ghost powers were broken
[B] get_spell was messed due to sval/xtra1 hack :(
[B] 'directional' spells didn't work if not of original realm.
[B] inventory wasn't refreshed after some scrolls(eg. id,enchant) are used.
[B] 'A  on broken door'. (do_cmd_look)

22/06/2002 (Yakina)
- updates needed for bcc.  Thanks Yakina for courtesy.

23/06/2002 (Jir)
- login is done according to the informations sent by the server.
  (race/class addition still needs client update, tho)
- SKILL_MISC, SKILL_AGILITY, SKILL_CALMNESS, SKILL_SWIM, SKILL_RICOCHET,
  SKILL_BOOMERANG, SKILL_MARTIAL_ARTS, SKILL_TRAINING, SKILL_INTERCEPT
- bow/xbow/sling/boomerang skills can prevent ammos from breaking.
- MKEY_PRAY is valid now.
- /autotag, auto-inscribe manually.
[H] Goodbye-Charlie trap toned down.
[B] potion of learning.
[B] MHIT +2632, MDAM +1318
[B] master_generate was broken.
[B] 'n' and 'p' didn't work well in the skill screen (common with ToME)
[C] 'c' and 'o' key available in skill screen (for quick browsing)

24/06/2002
[C]- .mangrc changed to .tomenetrc
[C]- Chardump ability in the char screen

** [B] stands for Bugfix.
** [C] stands for Client changes.
** [H] stands for Hack and rebalancement :)
** [P] stands for Porting from ToME.

=============================================================================
concisely: what's hot now?

- multiple-dungeons stuff
  + we should preserve level_up_y etc. for manually-added dungeons/towers.
- quest system
- skill system
  + SKILL_CLIMB
  + spell_info should be redone
- LUA hook
- csfunc
- alignment (let's wait for EE :)
- item stacking

=============================================================================
below this line are the unfixed bugs known:

[B] House doors still seem to crash sometimes. (door even vanishes??)
[B] wpos display hides wound states(eg.'Deep Gash')
[B] ever-charging arts (eg.star)
[B] 'You hit it.' etc in town (99% problem in zcave.m_idx)
    sometimes, monsters attack the player from nowhere.. prolly same root?
	* this only happens when rebooting the server and caves lost.
[B] some monsters become 'immune' to spell attacks.
[B][C] chat-history contains lines with 'mindcrafter'. 
[B] p_ptr->furry, lol
[B] 'Ring of Polymorphing of'.
[B] cannot 'run' near the outer permawall (run_test)
[B] mon_vis, obj_vis etc. are messed while the player is off.
[B] option '-r' puts the server into infinite-loop (genwild)
[B] GCU client flickers like hell. (fix_player)
[B] GCU client cannot handle the cursor very well.
[B] some ivents are not told to the players even when within the sight.
[B] white '@' sometimes appear on the screen.
[B] Yeek seems to receive the best store prices.

*below are bugs repoorted but not confirmed*
[B] Macro sticks sometimes
[B] CURSE_x does 100+ dmg on 50ft? (not confirmed)
*below are bugs not shown recently(fixed??)*
[B] cave can be erased prematurely after loading.
[B] /rec won't work if to wilderness? (admin)
[B] admin monk doesn't have inventory slot a)
    (gdb) print Players[1].inventory[0]
	$3 = {owner = 38, level = 1, k_idx = 1, iy = 0 '\000', ix = 0 '\000', wpos
	= {wx = 0, wy = 0, wz = 0}, tval = 0 '\000', sval = 0 '\000', bpval = 0,
	pval = 0, discount = 72 'H', number = 30 '\036', weight = 0, name1 = 0
	'\000', name2 = 0 '\000', name3 = 0, xtra1 = 0 '\000', xtra2 = 0 '\000',
	to_h = 0, to_d = 0, to_a = 0, ac = 0, dd = 0 '\000', ds = 0 '\000', timeout
	= 0, ident = 136 '\210', marked = 0 '\000', note = 12}

*below are phenomena not confirmed as bug*
[B?] breeders breed less if many players are on.
     buggie, but saves the server from getting slowed by breeding..

=============================================================================
memo and questions:
- player_is_king() is annuled?
- where's the jail?
- p_ptr->inventory[i].marked=3; /* LONG timeout */ <= how it's used?

==== below this line are 'implementations' and not 'bugs' ====
(Don't 'fix' them!! ;)
+ store beats price for non-*ID*ed items (esp.ego & randarts)
+ extra attack rings don't always give extra blows (esp.if heavy)
+ phase/recall may land you on water.
+ randarts lantern/torch may need fueling (and non-lit one doesn't give
  any resistances/abilities).

==== below this line are changes to be done in the future ====
# pfft, it's now called 3.5.2 w/o any of them implemented??
# k, let's slide the schedule off ..
[minor ones]
(3.5)
- implement NO_MAP fully please!
- recall-depth array for each dungeons/towers
- full colour-support in show_file
- sort unique-list according to the level
- tombstone screen
- wilderness compacting (how about 'compacting' townies?)
- display "non-scoring mode" in '@' screen
- torch/lantern shouldn't be EASY_KNOWN.
- Nazgul rings should have corresponding names
- implement EGO_WOUNDING(ie. monster bleeding)
- implement GF_* flags for exploding monsters(voir monster_death)
- make boomerangs useful
- flavor variator (eg. 'light' + 'red' => 'light red potion')
- reimplement /cast.
* Trap ideas
  - no return trap should steal books also?
  - telekinesis trap
  - house-door-opening trap
[C] allow to send not-defined key for easy extension
[C] '-s' option to specify rc-file name.
[C] chat-line cursor editing

[major ones]
(3.6)
- new terrains and their effects (f_info.txt) (do this *FIRST*!)
  - hills, deserts, lavas, waters, underwaters, tundra, elemental planes
  - loophole(like wall, but missiles/breathes pass)
  - passage requirements/(eq)damages/themes/generators/AI
  - terrain effects (like in some 'strategy' games
- variety of dungeon/floor types (d_info.txt)
  - several flags
  - size (done)
- better cave-generator (generate.c)
- fully-implemented multiple towns (t_*.txt)
- more kinds of stores / flexible store configuration (st_info.txt)
  + archery shop
  + bookstore
  + job centre (for lowbies died)
  + guild house
  + healer
- item stacks/monster inventory
  * vault treasures should be held by guardians
- item themes (mage drops magic items, etc)
(3.7)
- quests (needing LUA-hooks) {hopefully DarkGod}
- backbone scenario
  - token system (gather blabla to do blabla)
  - competitive events

(4.0)
- better vaults
  - between gates, patterns
- guild, or new party system (multi-player Omega :)
- client updates necessary
- total rebalancing for all of them
- fix gfx again
- interactive spell system (like in C3)

[sober ones]
- total source-code cleanup {takkaria?}
  - do :s/\/\/\(.*\)$/\/\*\1 \*\//
- integrate save/load into one function (eg. saveload.c)
- *_info.txt encryption
- better remove 'take note'(monster knowledge) stuffs?
- move configurable stuffs from defines.h to config.h
- savedata snapshot (via this, player can report bugs with savedata)
- slash-commands should have info file (like sl_info.txt)
- put CVS keyword($ID$) to every file.
- remove the hack in client which swaps sval/xtra1 ;(

[speeding the server up]
# tomenet.server never seems to take more than 10% of CPU time. why? (sched.c?)
- m_list and o_list should be separated by worldpos (like zcave)
- purging things (more)
- optimize monster AI
- reduce ATTR_MULTI (now testing)
- reduce floor size :)
- give up 'random-seeds' thingie and put flags to every item
- turn mmove2 functions into arrays
- bottlenecks: process_monsters, update_view(MAX_SIGHT), lite_spot, map_info,
	AI codes

[balance matters]
- should HAND_DOOM be allowed out of sight?
- missile traps do too small dmgs?
- 2H weapons should be more powerful in general?
  (they actually occupy 3 equipment slots!)
- prolly Dolphiners are too strong?
- Mage Staves should only be available for Sorc?

==== below this line are RFEs collected so far (good or bad) ====
[minor ones]
- party, guild and pk (players' interaction) codes:
  + pk via missile/spell should be punished?
  + player attacked by another player should be able to strike back at once?
  + the first /pk of newbie should put him into 'SAFE' mode (and not 'PK')?
  + not only 'attempt' but also 'commission' of pk should be punished.
  + ball spell should harm neutral players somewhat
    (or warrior&sorc combination will be too mighty)
  + vision sharing among the members of a party
  + make wand of haste monster etc. friend-castable
- monsters:
  + disarming (like ratling duelist chez AD*M)
  + monster digging should reflects the solidity of wall types
  + monster speech
  + 'water bolt' should wash players away.
  + aquatic should be hard to attack if underwater?
  + some monster may become 'ghost' after being killed?
  + monster spell points.
  + upper limit of monsters per floor?
  + better way to display egos/uniques
  + monsters should follow the player when climbling up/down staircase.
  + aquatic uniques
- traps:
  + another check for Dexterity (with high Dex, you can avoid some)
  + missile traps should have AC check(check_hit)?
- items:
  + Potion of Light Mana?
  + Scroll of Teleport After/To.
  + Scroll of Dull Weapon/Armor (makes the item (+0, +0) [n, +0])
  + Staff of Opening/Closing
  + Scroll of Admin Message (another way to tell players of information)
  + Musical Instruments
  + blessed/cursed, rusty/broken, fire/erode/waterproof flags etc.
  + LITE/RING/AMULET shouldn't be EASY_KNOWN? (for ego/randarts)
  + upgrade some of arts, so that they'll be treasured.
  + more tools
- anticheeze:
  + items enchanted with spells of enchant armor/weapon should get discount.
  + player shouldn't gain more than 1 levels at once (esp.from books)
- players:
  + thirst?
  + Asclep's '/spell' should be applicable to wands/rods?
  + when fruit-batting, only overflowed items should be dropped?
  + lowbies (<lv10?) should be immune to Black Breath?
  + raise stats when gaining level, lower ones first
    (better wait for ToME skill system?)
  + more equipment slots in general (like Bracer)
  + NO_GHOST, but not HELLISH mode
- combat:
  + players should be able to interfere monsters' firing/casting?
  + 2-weapon combat
  + DEX should affect missile to-hit? (or maybe done with skill)
  + more RBM and RMEs (like seducing, switching place)
- magic:
  + sth should be done with all those 'attacking' magic devices no1 uses,
	such as fire bolt wand/rod..
  + enlarge 'destroy traps' spell radius (but traps may 'resist' it)
  + implement project_m
  + check_st_anchor() should take distance into account?
  + separate GoI into 'vs.spell' and 'vs.melee'.
  + avoid landing in the middle of a lake (river is ok)
  + some methods(spell?) to detect vault entrance, so that ppl won't peek
    v_info.txt ...
- user interface:
  + query for selling/buying houses.
  + visual effect when teleporting, so that players won't lose sight of '@'.
  + add a command to *completely* redraw the screen.
  + smoother screen scroll (currently 1/2.. perhaps 1/4?)
  - enhanced help system (imo we cannot beat web browsers anyway..)
    + at least, jump and colour tags are needed.
  + 'hand to(give)' command
  + client option for verbosity;
    msg_print(Ind, importance, "Vlad was here!");
- misc:
  + some measures to 'cheezy' admins (at least some warnings)
  + some places that renders special services(eg. curing, id, *ID*, enchant etc)
    * no single town should contain all of them!
  + resurrect 'level feelings'
  + allow 'guest' account for invite-only server
  
[major ones]
- NPC/pet/golem/slave
  + NPC should basically be a monster with a flag (like RF9_NPC),
    and prolly with special array (npc_list[])?
- monsters' interactions
- subclass system (thief, esper, erudit, tough, mighty etc)
- karma/luck system (karma is like luck, but never gets positive value)
- make charisma/wisdom/dexterity more important
- resistances handled by percent
- time-limited features(like in Larn) / time bomb
	struct timed_event{
		worldpos wpos;
		int time;
		char ly, lx, event_kind, magnitude;};
- vanilla-Angband style houses
- horizontal-connected caves (eg.[32,32,-40]=>[32,31,-40])
- (re)new classes/races
  + Paladin/Ranger
  + Mimic (actually it's popular now, so no need perhaps :)
  + Telepath (as a keystone of party)
  + Merchant/Diplomat
  + Bard/Beastmaster/Necromancer
  * race/class extra powers (via '\n' command maybe?)
  * client changes below should be done first, so that we can add/change
    race/class w/o client update!
- spell extensions, esp. after lv50 (remove the 64-spells limit first!)
- randunis
- port internationalization codes
- newbie and veteran mode
- Auction house {A.Dingle}
- Casino (or Scroll of Back Gammon ;)
- really intelligent auto-retaliator/borg
- documentations
- grec-mythology monsters (GRECANGBAND)
- allow players to run always, by allowing it to the monsters too?

[sober (intrinsic) ones]
- savedata editor
- savedata scanner (to fix broken arts/unique lists, find illigal data etc.)
- vault/map editor
- new networking code (to kiss xpilot adieu :)
- redefine packets in a way more generic
- ./configure
- most of configurable-things should be in mangband.cfg(and not config.h)?
- meta-server should:
  + transmit 'port No.', 'variant name' information.
- periodic (a la cron) savedata backup
- infinite loop detector

[client matters]
- warriors.prf, priest.prf etc. should be bandled with client distribution?
- GTK client
- new method to do character-generation;
  - server prepares and sends a table of valid choices,
    and the client just displays it and send the answer back.
  - another solution is to put those things in a file like plug-ins.
- resurrect 'targetting cursor'

[lunatic ones]
- 3-D gfx and full-audio support
- full-mouse operation

==== below this line are backtraces collected so far (bad or mad.) ====
Program received signal SIGSEGV, Segmentation fault.
access_door (Ind=1, dna=0x0) at server/cmd2.c:609
609             if(dna->a_flags&ACF_LEVEL && p_ptr->lev<dna->min_level && p_ptr->dna!=dna->creator)
(gdb) bt
#0  access_door (Ind=1, dna=0x0) at server/cmd2.c:609
#1  0x80a1e38 in do_cmd_walk (Ind=1, dir=3, pickup=0) at server/cmd2.c:1938
#2  0x80ee73c in Receive_walk (ind=0) at server/nserver.c:3970
#3  0x80eb833 in process_pending_commands (ind=0) at server/nserver.c:1791
#4  0x80eb9d5 in Handle_input (fd=10, arg=0) at server/nserver.c:1936
#5  0x80d13eb in sched () at server/sched.c:549
#6  0x80e313e in play_game (new_game=0 '\000') at server/dungeon.c:3757
#7  0x80f4be4 in main (argc=2, argv=0xbfbff6bc) at server/main.c:269
#8  0x8049dcd in _start ()

Program received signal SIGSEGV, Segmentation fault.
0x80879d3 in project_i (Ind=1, who=-1, r=0, wpos=0x8d3ca2c, y=121, x=179, 
		dam=500, typ=13) at server/spells1.c:2606
2606            o_ptr = &o_list[c_ptr->o_idx];
#0  0x80879d3 in project_i (Ind=1, who=-1, r=0, wpos=0x8d3ca2c, y=121, x=179, 
		dam=500, typ=13) at server/spells1.c:2606
#1  0x808d8b1 in project (who=-1, rad=16, wpos=0x8d3ca2c, y=121, x=179, 
		dam=500, typ=13, flg=120) at server/spells1.c:5850
#2  0x8095348 in fire_ball (Ind=1, typ=13, dir=6, dam=500, rad=16)
at server/spells2.c:4082
#3  0x80c3441 in do_cmd_pray_aux (Ind=1, dir=6) at server/cmd5.c:3365
#4  0x810fd7f in Handle_direction (Ind=1, dir=6) at server/nserver.c:6736
#5  0x810e0f1 in Receive_direction (ind=0) at server/nserver.c:5891
#6  0x8103d5a in process_pending_commands (ind=0) at server/nserver.c:1717
#7  0x8103fdc in Handle_input (fd=10, arg=0) at server/nserver.c:1862
#8  0x80e3f45 in sched () at server/sched.c:549
#9  0x80f8aef in play_game (new_game=0 '\000') at server/dungeon.c:3462
#10 0x8110c70 in main (argc=0, argv=0xbfbff740) at server/main.c:269
#11 0x8049d99 in _start ()

Program received signal SIGSEGV, Segmentation fault.
0x80526bf in message_str (age=0) at client/c-util.c:1340
1340            o = message__ptr[x];
#0  0x80526bf in message_str (age=0) at client/c-util.c:1340
#1  0x80659f1 in fix_message () at client/c-xtra1.c:1067
#2  0x80666d0 in window_stuff () at client/c-xtra1.c:1407
#3  0x805b0f5 in Input_loop () at client/c-init.c:229
#4  0x805b5b0 in client_init (argv1=0x0) at client/c-init.c:464
#5  0x806822a in main (argc=1, argv=0xbfbff740) at client/client.c:263
#6  0x804a311 in _start ()

Program received signal SIGBUS, Bus error.
0x281e4901 in memcpy () from /usr/lib/libc.so.4
#0  0x281e4901 in memcpy () from /usr/lib/libc.so.4
#1  0xbfbff72c in ?? ()
#2  0x805f527 in Flush_queue () at client/nclient.c:831
#3  0x8054e8e in cmd_inven () at client/c-cmd.c:782
#4  0x80548e5 in process_command () at client/c-cmd.c:315
#5  0x805b0a9 in Input_loop () at client/c-init.c:201
#6  0x805b5b0 in client_init (argv1=0x0) at client/c-init.c:464
#7  0x806822a in main (argc=1, argv=0xbfbff724) at client/client.c:263
#8  0x804a311 in _start ()

Program terminated with signal 10, Bus error.
#0  0x281e3c71 in ?? ()
(gdb) bt
#0  0x281e3c71 in ?? ()
#1  0x805c1d1 in Flush_queue () at client/nclient.c:789
#2  0x8062bea in do_cmd_messages () at client/c-xtra2.c:303
#3  0x80534fd in process_command () at client/c-cmd.c:511
#4  0x8058fb1 in Input_loop () at client/c-init.c:206
#5  0x80595c7 in client_init (argv1=0x806e8c0 "a *SUPERB* hit!", skip=1 '\001') at client/c-init.c:476
#6  0x80640e1 in main (argc=1, argv=0xbfbff6f8) at client/client.c:463
#7  0x804a0dd in _start ()

==== Global matters ====
* direction
  - 'Buncha new stuffs'(ala Slash'em) vs. 'Handiness of playing'(ala Rogue)?
  - features vs. speed
  - long-term gameplay(ala UO) vs. quick game(ala Populous3)
  - terminal base(ascii+vi) vs modernity(gui+mouse)
+ BTW, how about 'ToMAngband'?
