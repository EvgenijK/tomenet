# File: q_info.txt

# This file contains all the quest information for new quest_info[] struct
# on which work started in 2013, to provide a full fledged quest framework.
#                                                    - C. Blue


# Version stamp (required)
V:0.0.1


# Current state - things that have already been implemented. Other stuff is omitted here.
# Some things that are not implemented in here are noted in caps in each line ;)
# 'N.I.' is short for  NOT IMPLEMENTED.

# N:index:internal codename(UNIQUE AND EXACTLY 10 CHARACTERS):creatorname:quest name[:repeatable (-1 for infinitely, default is 0, append an 'x' to disable it)]
# (optional) C:list stages that allow a player to acquire the quest, separated by colons (usually 0 aka the first stage)
# (optional) I:privileged:individual (MUST BE 1):minlv:maxlv:races:classes:modenorm:modeel:modepvp:fruitbat(1=real,2=real or fake):monsterform:questdonecreditstage
# (optional) E:list of colon-separated prequest codenames (up to 5) which must have been completed to pick up this quest
# (optional) T:night:day:morning:forenoon:noon:afternoon:evening:midnight:deepnight:starttime:stoptime
# (optional) U:endingstage (0 = none):duration:cooldown

# Q-lines are up to 5x repeatable, for up to 5 questors
# Q (for type=monster)  :type:ridx:char:attr:minlv:maxlv:name
# Q (for type=parchment):type:sval:attr:level:name
# Q (for type=object)   :type:tval:sval:pval:bpval:name1:name2:name2b:good?:great?:verygreat?:attr:level:name
# L (5x repeatable per Q line):locations (SURFACE/TOWNS ONLY):terrains:towns (BASIC 5 ONLY):exact wpos wx:wy:wz:adjacent terrain extension:exact pos x:y:radius:mapfile (if not using terrain type) or '-' (N.I.)
# (optional) F (5x repeatable per Q line):accept-on-los? (N.I.):accept-on-interaction?:talkable?:despawned? (N.I.):invincible?:staticfloor?:quitfloor?(N.I.)

#(Parameters from here on are all individual per quest stage)

# (optional) A:stage:spawn quest (-1 to disable):auto-accept it (2=quietly):change stage (-1 to disable):0:timed change at ingame hour:timed change after realtime minutes:change quietly (skip stage dialogue)
# (optional) X (50x repeatable):stage:flags:narration text
# (optional?) W (15x repeatable):questor:stage:flags:examine? (0=normal talk,1=examine):convo line
# (optional) Y (100x repeatable):questor (-1 for any):stage (-1 for any*):flags:keyword (or "y" for 1st keyword and "n" for second, for a yes/no choice):changeflags:nextstage (or -1 for dont change stage)
# (optional) YQ (after a Y-line):list of further questors for which this keyword is valid, separated by colons
# (optional) YS (after a Y-line):list of further stages during which this keyword is valid, separated by colons
# (optional) y (50x repeatable):questor (-1 for any):stage (-1 for any):flags:keyword
# (optional) yY (after a y-line):list of further keywords for which this reply is valid, separated by colons
# (optional) yQ (after a y-line):list of further questors for which this reply is valid, separated by colons
# (optional) yS (after a y-line):list of further stages during which this reply is valid, separated by colons
# (optional, YR (after a y-line, 15x repeatable):flags:reply convo line

# goals to kill specific monsters:
# (optional) k:stage:goal:minlev:maxlev:number:spawn (N.I.):spawn will target (N.I.)
# (optional) kI:stage:goal:r_idx... (list of r_idx, up to 10, separated by colons)
# (optional) kV:stage:goal:r_char:r_attr... (list of ':r_char:r_attr' pairs, up to 5, separated by colons)

# goals to collect specific items:
# (optional) r:stage:goal:minval:number
# (optional) rI:stage:goal:tval:sval... (list of ':tval:sval' pairs, up to 10, separated by colons)
# (optional) rV:stage:goal:pval:bpval:attr:name1:name2:name2b... (list of 5-tuples like this, up to 5, separated by colons)

# optional target location where those kill/retrieve goals have to be cleared:
# (optional, if k/r line exists) P:stage:goal#:goalwpos wx:wy:wz:adjacent terrain extension:goal at exact x:y:radius:mapfile (if not using terrain type) or '-'

# optional target location where the player has to move after having cleared the goals, to get them credited.
# This can also be specified without any kill/retrieve goals, in which case it becomes a simple 'travel-to' goal:
# (optional) M:stage:goal#:deliver to wpos wx:wy:wz:deliver to terrain type:deliver to pos x:y:radius:mapfile (if not using terrain type) or '-'

# (optional) Z:stage:goal:changeflags (flags that get set/cleared when that goal is cleared)
# G:stage:next stage:main kill/retrieve/move goals required to complete separated by colons (optional goals are NOT allowed here) to progress to next stage
# (optional) O:stage:get reward n (-1 to disable):main/optional goals required for reward (0 for none -> it's for free) separated by colons
# (optional) R:stage:(10x repeatable) define reward tval:sval:pval:bpval:name1:name2:name2b:good?:great?:verygreat?:createreward()?:gold:exp:specialstatuseffect

# Further notes:
# -The index number must just be counting up for each quest added to this file, starting with 0.
# -The internal codename must be unique among all quests and exactly 10 characters long.
# -All quests should currently be set to 'individual'! (Global quests work depending on the quest goals. Some won't, though.)
# -questor types 1 (monster) and 3 (object) are supported at the moment.
# -questor 'locations' are: +1 for 'world surface', +2 for 'town' (so '3' for both). Must not be zero unless a specific wpos is set instead.
# -For item questors you might want to set 'examine' flag so they don't "talk" to you.
# -#goal is 1..5 for main goal, and -1..-5 for optional goals.
# -Although the 'examine' flag can be specified for each conversation line again, the last line existing for a questor/stage combination will take priority.
# -About keywords:
#   "~" means the empty keyword "", user can just press ENTER key without writing anything to trigger it.
#   if the FIRST MATCHING (questor+stage) keyword is "y" it brings up a yes/no prompt. The second questor/stage-matching keyword should be "n".
#   Use [[...]] to highlight the text between the brackets.
#   (*) Keywords set to 'any stage' (-1) are not sufficient to stop an otherwise empty stage from terminate nor to prompt a quest_dialogue() on their own.
# -About global 'flags':
#   '-' means no flags.
#   For lines that change those: 'a' to 'p' to clear flags, 'A' to 'P' to set flags, eg  ..:aBChK:..
#   For lines that check those (conversational lines): 'A' to 'P' to check for a flag, which must be set (to display the convo line etc). Cleared flags don't matter.
# -About retrieving items:
#   char/attr '-' means 'any', pval/bpval -9999 means 'any', oname1/2/2b -1 means 'any' and -2 means 'any but must not be zero'.
# -About R/O lines:
#   If R-lines are given for a stage, but no O line is defined, the rewards are handed out "for free" in that stage.

# You must never use the ':' char in any keyword or text line, since it's used as delimiter here.
# #questor is 0..4 (5 questors max)
# #stage is 1..29 (30 stages max)
# talk/narration can have up to 15 text lines
# keywords can be up to 29 characters long
# #goal is 1..5 for main goal, and -1..-5 for optional goals.
#  Optional goals are currently NOT IMPLEMENTED and will break the quest!


# for testing purpose
N:0:testquesAR:C. Blue:Test Quest:-1
C:0
I:1:1:1:100:FFFFF:FFFF:1:1:1:0:0:1
T:1:1:1:1:1:1:1:1:1:-1:-1
Q:1:37:b:T:-1:-1:Blind Bat
#L:2:0:1:-1:-1:-1:0:98:39:0:-
L:0:0:0:63:63:0:0:98:39:0:-
F:0:1:1:0:1:0:0
U:0:0:0
W:0:0:-:0:Hello, fellow fruit bat!
W:0:0:-:0:Would you like some [[ale]] or rather a [[solid ration]]?
Y:0:0:-:ale:-:1
Y:0:0:-:ration:-:2
Y:0:0:-:solid ration:-:2
W:0:1:-:0:Well then, visit the shop keeper of the general store!
W:0:2:-:0:Well then, visit the shop keeper of the general store..
#position 105:40 for actual Bree's general store entrance:
M:1:1:32:32:0:0:105:40:0:-
M:2:1:32:32:0:0:105:40:0:-
G:1:3:1
G:2:4:1
O:3:0:0
X:3:-:The shop keeper hands you a pint of fine ale!
O:4:1:0
X:4:-:The shop keeper hands you a ration of food!
R:3:80:38:0:0:0:0:0:0:0:0:0:4:2:0
R:4:80:35:0:0:0:0:0:0:0:0:0:3:1:0


# for testing purpose
N:1:testquestM:C. Blue:Minimal Test Quest:-1
#Q:1:37:b:n:-1:-1:-1:-1:-1:Fast Bat
Q:3:22:30:0:0:0:0:0:0:0:0:P:0:Sharp..Bat..of Slicing?
L:0:0:0:63:63:0:0:100:39:0:-
W:0:0:-:1:Hello, fellow fruit bat! Wanna visit the General Store for me?
Y:0:0:-:y:-:1
Y:0:0:-:n:-:2
W:0:1:-:0:Thanks!
M:1:1:32:32:0:0:105:40:0:-
G:1:3:1
X:3:-:The shop keeper hands you a pint of fine ale!
R:3:80:38:0:0:0:0:0:0:0:0:0:1:1:0


# for testing purpose
N:2:testquesKR:C. Blue:Kill/Retrieve Test Quest:-1
Q:1:37:b:N:-1:-1:Goalkeeper Bat
L:0:0:0:63:63:0:0:99:35:0:-
W:0:0:-:0:'Sup, yo, fellow fruit bat! [[Kill]] shit or [[retrieve]] stuff for me.
W:0:0:-:0:So what do you prefer, buddy?
Y:0:-1:-:sup:-:-1
y:0:-1:-:sup
yR:-:Yo!
Y:0:-1:-:yo:-:-1
y:0:-1:-:yo
yR:-:Sup!

Y:0:0:-:kill:-:1
#W:0:1:-:0:Slay two dogs or wolves, they deserve it. Report to the general store's keeper!
W:0:1:-:0:Slay two dogs or wolves, they deserve it. Let me know when you're done.
k:1:1:0:0:2:0:0
kV:1:1:C:-
#kI:1:1:r_idx...
#M:1:2:32:32:0:0:105:40:0:-
M:1:2:63:63:0:0:99:35:1:-
G:1:3:1:2
X:3:-:The Goalkeeper Bat seems very satisfied.
R:3:80:38:0:0:0:0:0:0:0:0:0:2:2:0

Y:0:0:-:retrieve:-:2
W:0:2:-:0:Dude where's muh potions.. I had two red potions I'm sure.
#W:0:2:-:0:Anyway, if you find them, just bring them to the general store's keeper, ok?
r:2:1:0:2
rV:2:1:-9999:-9999:r:-1:-1:-1:-9999:-9999:R:-1:-1:-1:
#M:2:2:32:32:0:0:105:40:0:-
M:2:2:63:63:0:0:99:35:1:-
G:2:4:1:2
X:4:-:The Goalkeeper Bat seems very satisfied.
R:4:80:38:0:0:0:0:0:1:1:0:0:2:2:0




# Complete state, when everything has been implemented:

# N:index:codename:creator:quest name[:repeatable (-1 for infinitely, default is 0, append an 'x' to disable it)]
# (optional) C:list stages that allow a player to acquire the quest, separated by colons (usually 0 aka the first stage)
# (optional) I:privileged:individual:minlv:maxlv:races:classes:modenorm:modeel:modepvp:fruitbat(1=real,2=real or fake):monsterform:questdonecreditstage
# (optional) E:list of colon-separated prequest codenames
# (optional) T:night:day:morning:forenoon:noon:afternoon:evening:midnight:deepnight:starttime:stoptime
# (optional) U:endingstage (0 = none):duration:cooldown
# //Q (5x repeatable, for up to 5 questors):type:ridx:char:attr:minlv:maxlv:sval:ktval:ksval:name
# Q-lines are up to 5x repeatable, for up to 5 questors
# Q (for type=monster)  :type:ridx:char:attr:minlv:maxlv:name
# Q (for type=parchment):type:sval:attr:level:name
# Q (for type=object)   :type:tval:sval:pval:bpval:name1:name2:name2b:good?:great?:verygreat?:attr:level:name
# //todo (optional) K (5x repeatable, per Q line):giveexp:dropgold:itemdroptype (0=none,1=regular,2=specific):tval:sval:pval:bpval:name1:name2:name2b:good:great:createreward
# L (5x repeatable per Q line):locations:towns:exact wpos wx:wy:wz:adjacent terrain extension:exact pos x:y:mapfile (if not using terrain type) or '-'
# (optional) F (5x repeatable per Q line):accept-on-los?:accept-on-interaction?:talkable?:despawned?:invincible?:staticfloor?:quitfloor?
# //todo (optional) D:dungeon to spawn ...
#(Parameters from here on are all individual per quest stage)
# (optional) A:stage:spawn quest (-1 to disable):auto-accept it (2=quietly):change stage:timed change offset:timed change absolute:timed change at realtime (-1 disables):change quietly (skip stage dialogue)
# //NOPE (optional) A:stage:spawn quest (-1 to disable):auto-accept it (2=quietly):change stage (-1 to disable):0 (nonfunctional):timed change at ingame hour:timed change after realtime minutes:change quietly (skip stage dialogue)
# //todo (optional) S:questor changes/polymorphes ...
# //todo (optional) S/H:questor hostility ...
# //todo (optional) J:questor moves, teleports, teleports player ...
# (optional) X (50x repeatable):stage:flags:narration text
# (optional?) W (15x repeatable):questor:stage:flags:examine? (0=normal talk,1=examine):convo line
# (optional) Y (100x repeatable):questor (-1 for any):stage (-1 for any*):flags:keyword (or "y" for 1st keyword and "n" for second, for a yes/no choice):changeflags:nextstage (or -1 for dont change stage)
# (optional) YQ (after a Y-line):list of further questors for which this keyword is valid, separated by colons
# (optional) YS (after a Y-line):list of further stages during which this keyword is valid, separated by colons
# (optional) y (50x repeatable):questor (-1 for any):stage (-1 for any):flags:keyword
# (optional) yY (after a y-line):list of further keywords for which this reply is valid, separated by colons
# (optional) yQ (after a y-line):list of further questors for which this reply is valid, separated by colons
# (optional) yS (after a y-line):list of further stages during which this reply is valid, separated by colons
# (optional, YR (after a y-line, 15x repeatable):flags:reply convo line
# (optional) k:stage:goal:minlev:maxlev:number:spawn:spawn will target
# (optional) kI:stage:goal:r_idx... (list of r_idx, up to 10, separated by colons)
# (optional) kV:stage:goal:r_char:r_attr... (list of ':r_char:r_attr' pairs, up to 5, separated by colons)
# (optional) r:stage:goal:minval:number
# (optional) rI:stage:goal:tval:sval... (list of ':tval:sval' pairs, up to 10, separated by colons)
# (optional) rV:stage:goal:pval:bpval:attr:name1:name2:name2b... (list of 6-tuples like this, up to 5, separated by colons)
# (optional, if k/r line exists) P:stage:goal#:goalwpos wx:wy:wz:adjacent terrain extension:goal at exact x:y:radius:mapfile (if not using terrain type) or '-'
# (optional) M:stage:goal#:deliver to wpos wx:wy:wz:deliver to terrain type:deliver to pos x:y:radius:mapfile (if not using terrain type) or '-'
# //todo--use deliver-goal instead for now! (optional) B:stage:goal# that gets only credited when we return back to the questor:goal2#:goal3#...
# (optional) Z:stage:goal:changeflags
# G:stage:next stage:main kill/retrieve/move goals required to complete separated by colons (optional goals are NOT allowed here)
# (optional) O:stage:get reward n (-1 to disable):main/optional goals required for reward (0 for none -> it's for free) separated by colons
# (optional, linked to 'O') R:stage:(10x repeatable) define reward tval:sval:pval:bpval:name1:name2:name2b:good?:great?:verygreat?:createreward()?:gold:exp:specialstatuseffect
