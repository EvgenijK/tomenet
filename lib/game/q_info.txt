# File: q_info.txt

# This file contains all the quest information for new quest_info[] struct
# on which work started in 2013, to provide a full fledged quest framework.
#                                                    - C. Blue


# Version stamp (required)
V:0.0.1


# Current state - things that have already been implemented. Other stuff is omitted here.

# N:index:codename:creatorname[:repeatable (-1 for infinitely, default is 0, append an 'x' to disable it)]
# (optional) C:list stages that allow a player to acquire the quest, separated by colons (usually 0 aka the first stage)
# (optional) I:privileged:individual (MUST BE 1!!):minlv:maxlv:races:classes:modenorm:modeel:modepvp:fruitbat(1=real,2=real or fake):monsterform:questdonecreditstage
# (optional) E:list of colon-separated prequest codenames (up to 5) which must have been completed to pick up this quest
# (optional) T:night:day:morning:forenoon:noon:afternoon:evening:midnight:deepnight:starttime:stoptime
# (optional) U:endingstage (0 = none):duration:cooldown
# Q (5x repeatable, for up to 5 questors):type:ridx:char:attr:minlv:maxlv:sval:ktval:ksval:name
# L (5x repeatable per Q line):locations:towns:exact wpos wx:wy:wz:adjacent terrain extension:exact pos x:y:mapfile (if not using terrain type) or '-'
# (optional) F (5x repeatable per Q line):accept-on-los?:accept-on-interaction?:talkable?:despawned?:invincible?:staticfloor?:quitfloor?
#(Parameters from here on are all individual per quest stage)
# (optional) A:stage:spawn quest (-1 to disable):auto-accept it (2=quietly):change stage (-1 to disable):0 (nonfunctional):timed change at ingame hour:timed change after realtime minutes:change quietly (skip stage dialogue)
# (optional) X (50x repeatable):stage:flags:narration text
# W (15x repeatable):questor:stage:flags:convo line
# (optional) Y (100x repeatable):questor (-1 for any):stage (-1 for any):flags:keyword (or "y" for 1st keyword and "n" for second, for a yes/no choice):changeflags:nextstage
# (optional) YQ (after a Y-line):list of further questors for which this keyword is valid, separated by colons
# (optional) YS (after a Y-line):list of further stages during which this keyword is valid, separated by colons
# (optional) y (50x repeatable):questor (-1 for any):stage (-1 for any):flags:keyword
# (optional) yY (after a y-line):list of further keywords for which this reply is valid, separated by colons
# (optional) yQ (after a y-line):list of further questors for which this reply is valid, separated by colons
# (optional) yS (after a y-line):list of further stages during which this reply is valid, separated by colons
# (optional, YR (after a y-line, 15x repeatable):flags:reply convo line
# (optional) k:stage:goal:minlev:maxlev:number:spawn:spawn will target
# (optional) kI:stage:goal:r_idx... (list of r_idx, up to 10, separated by colons)
# (optional) kV:stage:goal:r_char:r_attr... (list of ':r_char:r_attr' pairs, up to 5, separated by colons)
# (optional) r:stage:goal:minval:number
# (optional) rI:stage:goal:tval:sval... (list of ':tval:sval' pairs, up to 10, separated by colons)
# (optional) rV:stage:goal:pval:bpval:attr:name1:name2:name2b... (list of 5-tuples like this, up to 5, separated by colons)
# (optional, if k/r line exists) P:stage:goal#:goalwpos wx:wy:wz:adjacent terrain extension:goal at exact x:y:mapfile (if not using terrain type) or '-'
# (optional) M:stage:goal#:deliver to wpos wx:wy:wz:deliver to terrain type:deliver to pos x:y:mapfile (if not using terrain type) or '-'
# (optional) Z:stage:goal:changeflags
# G:stage:next stage:main kill/retrieve/move goals required to complete separated by colons
# (optional) O:stage:get reward n (-1 to disable):main/optional goals required for reward (0 for none -> it's for free) separated by colons
# (optional) R:stage:(10x repeatable) define reward tval:sval:pval:bpval:name1:name2:name2b:good?:great?:verygreat?:createreward()?:gold:exp:specialstatuseffect

# -All quests should currently be set to 'individual'! (Global quests work depending on the quest goals. Some won't, though.)
# -#goal is 1..5 for main goal, and -1..-5 for optional goals.
# -About keywords: '-' means the empty keyword "", ie user just needs to press ENTER key without writing anything.
#   Use [[...]] to highlight the text between the brackets.
# -About global 'flags':
#   '-' means no flags.
#   For lines that change those: 'a' to 'p' to clear flags, 'A' to 'P' to set flags.
#   For lines that check those (conversational lines): 'A' to 'P' to check for a flag, which must be set (to display the convo line etc). Cleared flags don't matter.
# -About retrieving items:
#   char/attr 254 means 'any', pval/bpval -9999 means 'any', oname1/2/2b -1 means 'any' and -2 means 'any but must not be zero'.
# -About R/O lines:
#   If R-lines are given for a stage, but no O line is defined, the rewards are handed out "for free" in that stage.


# for testing purpose
N:0:testquest0:C. Blue:Test Quest:-1
C:0
I:1:1:1:100:FFFFF:FFFF:1:1:1:0:0:1
T:1:1:1:1:1:1:1:1:1:-1:-1
Q:1:37:b:T:-1:-1:-1:-1:-1:Blind Bat
#L:1:1:-1:-1:-1:0:98:39:-
L:0:0:63:63:0:0:98:39:-
F:0:1:1:0:1:0:0
U:0:0:0
W:0:0:-:Hello, fellow fruit bat!
W:0:0:-:Would you like some [[ale]] or rather a [[solid ration]]?
Y:0:0:-:ale:-:1
Y:0:0:-:ration:-:2
Y:0:0:-:solid ration:-:2
W:0:1:-:Well then, visit the shop keeper of the general store!
W:0:2:-:Well then, visit the shop keeper of the general store..
#position 105:40 for actual Bree's general store entrance:
M:1:1:32:32:0:0:105:40:-
M:2:1:32:32:0:0:105:40:-
G:1:3:1
G:2:4:1
O:3:0:0
X:3:-:The shop keeper hands you a pint of fine ale!
O:4:1:0
X:4:-:The shop keeper hands you a ration of food!
R:3:80:38:0:0:0:0:0:0:0:0:0:4:2:0
R:4:80:35:0:0:0:0:0:0:0:0:0:3:1:0

N:1:testquest1:C. Blue:Minimal Test Quest:-1
Q:1:37:b:n:-1:-1:-1:-1:-1:Fast Bat
L:0:0:63:63:0:0:100:39:-
W:0:0:-:Hello, fellow fruit bat! Wanna visit the General Store for me?
Y:0:0:-:y:-:1
Y:0:0:-:n:-:2
W:0:1:-:Thanks!
M:1:1:32:32:0:0:105:40:-
G:1:3:1
X:3:-:The shop keeper hands you a pint of fine ale!
R:3:80:38:0:0:0:0:0:0:0:0:0:1:1:0

$TEST_SERVER$N:2:testquest2:C. Blue:Kill/Retrieve Test Quest:-1
$TEST_SERVER$Q:1:37:b:A:-1:-1:-1:-1:-1:Goalkeeper Bat
$TEST_SERVER$L:0:0:63:63:0:0:99:35:-
$TEST_SERVER$W:0:0:-:'Sup, fellow fruit bat! Kill shit and retrieve stuff for me.
$TEST_SERVER$Y:0:0:-:sup:-:-1
$TEST_SERVER$y:0:0:-:sup
$TEST_SERVER$yR:-:Yo!
$TEST_SERVER$Y:0:0:-:yo:-:-1
$TEST_SERVER$y:0:0:-:yo
$TEST_SERVER$yR:-:Sup!
$TEST_SERVER$k:0:1:0:0:3:0:0
$TEST_SERVER$kV:0:1:T:-
#$TEST_SERVER$kI:0:1:r_idx...
$TEST_SERVER$M:0:2:32:32:0:0:105:40:-
$TEST_SERVER$G:0:1:1:2
$TEST_SERVER$W:0:1:-:Excellent.
$TEST_SERVER$X:1:-:The Goalkeeper Bat seems very satisfied.
$TEST_SERVER$R:1:80:38:0:0:0:0:0:0:0:0:0:2:2:0


# Complete state, when everything has been implemented:

# N:index:codename:creator:name[:repeatable (-1 for infinitely, default is 0, append an 'x' to disable it)]
# (optional) C:list stages that allow a player to acquire the quest, separated by colons (usually 0 aka the first stage)
# (optional) I:privileged:individual:minlv:maxlv:races:classes:modenorm:modeel:modepvp:fruitbat(1=real,2=real or fake):monsterform:questdonecreditstage
# (optional) E:list of colon-separated prequest codenames
# (optional) T:night:day:morning:forenoon:noon:afternoon:evening:midnight:deepnight:starttime:stoptime
# (optional) U:endingstage (0 = none):duration:cooldown
# Q (5x repeatable, for up to 5 questors):type:ridx:char:attr:minlv:maxlv:sval:ktval:ksval:name
# //todo (optional) K (5x repeatable, per Q line):giveexp:dropgold:itemdroptype (0=none,1=regular,2=specific):tval:sval:pval:bpval:name1:name2:name2b:good:great:createreward
# L (5x repeatable per Q line):locations:towns:exact wpos wx:wy:wz:adjacent terrain extension:exact pos x:y:mapfile (if not using terrain type) or '-'
# (optional) F (5x repeatable per Q line):accept-on-los?:accept-on-interaction?:talkable?:despawned?:invincible?:staticfloor?:quitfloor?
# //todo (optional) D:dungeon to spawn ...
#(Parameters from here on are all individual per quest stage)
# (optional) A:stage:spawn quest (-1 to disable):auto-accept it (2=quietly):change stage:timed change offset:timed change absolute:timed change at realtime (-1 disables):change quietly (skip stage dialogue)
# //NOPE (optional) A:stage:spawn quest (-1 to disable):auto-accept it (2=quietly):change stage (-1 to disable):0 (nonfunctional):timed change at ingame hour:timed change after realtime minutes:change quietly (skip stage dialogue)
# //todo (optional) S:questor changes/polymorphes ...
# //todo (optional) S/H:questor hostility ...
# //todo (optional) J:questor moves, teleports, teleports player ...
# (optional) X (50x repeatable):stage:flags:narration text
# W (15x repeatable):questor:stage:flags:convo line
# (optional) Y (100x repeatable):questor (-1 for any):stage (-1 for any):flags:keyword (or "y" for 1st keyword and "n" for second, for a yes/no choice):changeflags:nextstage
# (optional) YQ (after a Y-line):list of further questors for which this keyword is valid, separated by colons
# (optional) YS (after a Y-line):list of further stages during which this keyword is valid, separated by colons
# (optional) y (50x repeatable):questor (-1 for any):stage (-1 for any):flags:keyword
# (optional) yY (after a y-line):list of further keywords for which this reply is valid, separated by colons
# (optional) yQ (after a y-line):list of further questors for which this reply is valid, separated by colons
# (optional) yS (after a y-line):list of further stages during which this reply is valid, separated by colons
# (optional, YR (after a y-line, 15x repeatable):flags:reply convo line
# (optional) k:stage:goal:minlev:maxlev:number:spawn:spawn will target
# (optional) kI:stage:goal:r_idx... (list of r_idx, up to 10, separated by colons)
# (optional) kV:stage:goal:r_char:r_attr... (list of ':r_char:r_attr' pairs, up to 5, separated by colons)
# (optional) r:stage:goal:minval:number
# (optional) rI:stage:goal:tval:sval... (list of ':tval:sval' pairs, up to 10, separated by colons)
# (optional) rV:stage:goal:pval:bpval:attr:name1:name2:name2b... (list of 5-tuples like this, up to 5, separated by colons)
# (optional, if k/r line exists) P:stage:goal#:goalwpos wx:wy:wz:adjacent terrain extension:goal at exact x:y:mapfile (if not using terrain type) or '-'
# (optional) M:stage:goal#:deliver to wpos wx:wy:wz:deliver to terrain type:deliver to pos x:y:mapfile (if not using terrain type) or '-'
# //todo--use deliver-goal instead for now! (optional) B:stage:goal# that gets only credited when we return back to the questor:goal2#:goal3#...
# (optional) Z:stage:goal:changeflags
# G:stage:next stage:main kill/retrieve/move goals required to complete separated by colons
# (optional) O:stage:get reward n (-1 to disable):main/optional goals required for reward (0 for none -> it's for free) separated by colons
# (optional, linked to 'O') R:stage:(10x repeatable) define reward tval:sval:pval:bpval:name1:name2:name2b:good?:great?:verygreat?:createreward()?:gold:exp:specialstatuseffect

# Note: #goal is 1..5 for main goal, and -1..-5 for optional goals.
# Note about keywords: '-' means the empty keyword "", ie user just needs to press ENTER key without writing anything.
#   Use [[...]] to highlight the text between the brackets.
# Note about global 'flags':
#   '-' means no flags.
#   For lines that change those: 'a' to 'p' to clear flags, 'A' to 'P' to set flags.
#   For lines that check those (conversational lines): 'A' to 'P' to check for a flag, which must be set (to display the convo line etc). Cleared flags don't matter.
# Note about retrieving items:
#   char/attr '-' means 'any', pval/bpval -9999 means 'any', oname1/2/2b -1 means 'any' and -2 means 'any but must not be zero'.
